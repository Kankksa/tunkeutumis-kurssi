# h1 Kybertappoketju
Ensimmäisen viikon kotitehtävät.

## x)  Tiivistystehtävät
### Darknet diaries EP 115: Player cheater developer spy
- Videopeli huijarien maailma on nykyään monimutkainen petä/huijaa/vakoile maailma
- Huijausten kehittäjät tekevät palveluiden ostosta monimutkaista estääkseen huijausten leviämisen kilpailijoille tai pelin kehittäjille.
- Pelin kehittäjillä on vaikeuksia saada huijausten kehittäjiä vastuuseen teoistaan. Vaikka pelien haavoittuvuudet saadaan korjattua, on hakkereita vaikea saada oikeuteen tietämättä tarkasti keitä he ovat, yksi epäeettinen vaihtoehto on käyttää phishing menetelmiä hakkereita kohtaan. 

### Intrusion Kill Chain
- Seitsemän osainen ketju, joka kuvaa tunkeutumisen vaiheita
- Voidaan käyttää puolustautumisen suunnitteluun

### The Art of Hacking
- Aktiivisessa tiedustelussa kohteeseen ruvetaan lähettämään tietoa, toivoen vastauksia joista saa jotain irti
- Työkaluina portiskannerit (nmap, masscan, udpprotoscanner). Eyewitness, joka ottaa kuvia verkkosovelluksista ja analysoi mitkä niistä mahdollisesti ovat tärkeitä.
- Haavoittuvuus skannerit, verkkosovelluksiin sekä verkkoihin.

### KKO:2003:36
- Henkilö A oli porttiskannannut osuuspankin verkkoa
- Henkilö A tuomittiin tietomurron yrityksestä, vaikkakaan pelkällä porttiskannauksella ei sisään vielä pääse, mutta sen mahdollisesti löytämät haavoittuvuudet voisivat tämän mahdollistaa.
- Henkilö A tuomittiin maksamaan korvauksia osuuskunnalle sekä yhtiölle


## a) Kali Linuxin asentaminen
Kali Linuxin asentaminen sujui ilman ongelmia, asensin version 2025.2 Kalin verkkosivuilta löytyvältä iso-tiedostolta.
## b) Virtuaalikoneen irrottaminen verkosta
Irroitin virtuaalikoneen verkosta vaihtamalla virtualboxin network asetuksista network adapterin kohdalle vaihtoehdon ``` Host only adapter ```

<img width="708" height="555" alt="host only" src="https://github.com/user-attachments/assets/3a469cef-872f-4961-a3e2-3d2ee93a5790" />

Tämän jälkeen todensin sen komennolla ``` ping 8.8.8.8 ```

<img width="793" height="598" alt="8 8 8 8" src="https://github.com/user-attachments/assets/a42cb773-0cec-4634-945c-b65e10d420c0" />

## c) Porttiskannaus
Tein porttiskannauksen komennolla ```nmap -T4 -A localhost```. Parametri -T4 vaikuttaa scannauksen nopeuteen, -A laittaa päälle käyttöjärjestelmän havaitsemisen ja localhost kohdistaa skannauksen omaan koneeseen.
Parametrien tarkoitukset tarkastettu Nathan Housen nmap cheat sheetistä.

<img width="643" height="315" alt="nmap" src="https://github.com/user-attachments/assets/fa2ef183-f9b4-43b2-9d13-edf7fbb48481" />

Portteja ei ole auki eikä ohjelma osaa edes kertoa käyttöjärjestelmää.


## d) Uusi skannaus demonien kanssa
Ensimmäisen skannauksen jälkeen yhdistin virtuaalikoneen taas verkkoon ja asensin siihen demonit Apache2 sekä Open SSH Server.
Tämän jälkeen irrotin koneen taas verkosta ja suoritin uudestaan komennon ```nmap -T4 -A localhost```.

<img width="648" height="385" alt="nmap2" src="https://github.com/user-attachments/assets/e6255d76-8a21-4f8c-850e-dc9726064361" />

Uuden skannauksen jälkeen ohjelma osasi kertoa avoimistas tcp porteista 22 sekä 80, ja linux käyttöjärjestelmästä.

## e) Metasploitablen asentaminen

Asensin uuden virtuaalikoneen ja valitsin sen kovalevyksi lataamani metasploitable virtuaali kovalevyn. 

<img width="481" height="169" alt="metaspl" src="https://github.com/user-attachments/assets/4e16388e-e25d-463d-89b7-24c33678eeb3" />

## f) Koneiden yhdistäminen toisiinsa
Loin virtualboxissa uuden Host-Only Networkin, ja yhdistin Kali koneen 2. adapterin siihen sekä Metasploitable koneen 1. adapterin siihen samaan verkkoon.
Yhdistin myös Kali koneen 1. adapterin NAT verkkoon, jotta koneen saa tarvittaessa yhdistettyä helposti takaisin internettiin.
Käytin tässä vaiheessa apuna Tuomas Valkamon raporttia jossa on myös yhdistetty metaesploitable kone toiseen virtuaalikoneeseen.

Kali 

<img width="623" height="75" alt="Kone1" src="https://github.com/user-attachments/assets/c127e525-9de5-49e1-b966-0e72de8a9fa0" />

Metasploitable

<img width="676" height="61" alt="Kone2" src="https://github.com/user-attachments/assets/6e6d8b38-d6bf-45a0-8575-dd2a32946644" />

## g) Metasploitablen etsiminen porttiskannerilla
Tarkistin metasploitable koneen ip-osoitteen ```ifconfig``` komennolla, ja tämän jälkeen pingasin sitä Kali koneelta, tämän jälkeen vielä varmistin ettei googlen pingaus onnistu.

<img width="586" height="306" alt="pingpong2" src="https://github.com/user-attachments/assets/3d4b8a34-234b-4c20-800d-df0e0efd716b" />

Sitten kokeilin porttiskannata Host-Only verkon ip-osoitetta, ja sieltä löytyi IP-osoite joka vastasi metasploitable koneen antamaa IP-osoitetta ja käymällä kyseisessä IP-osoitteessa pääsin metasploitable sivulle.

<img width="666" height="319" alt="nmap3" src="https://github.com/user-attachments/assets/a3b1e49f-c027-4699-ab6d-36e8afe65571" />

<img width="796" height="534" alt="metasplottis" src="https://github.com/user-attachments/assets/d5981a61-ff6b-4e4d-95bf-14949cd2bfb0" />


## h) Metasploitable skannaus

Skannaus ```nmap -A -T4 -p- <ip-osoite>``` osoitti että 30 porttia oli auki, tietämättä haavoittuvaisuuksista kovinkaan paljoa voisin kuvitella hyökkääjän olevan kiinnostunut porteista 445/tcp jossa on tiedostojen jakoon käytettävä Samba, sekä portti 3306/tcp jossa on MySQL, jonka olen usein kuullut mainittavan kun puhutaan haavoittuvaisuuksista.


# Lähteet

Darknet diaries jakso 115. Kuunneltavissa: https://darknetdiaries.com/transcript/115/

Hutchins et al 2011: Intelligence-Driven Computer Network Defense Informed by Analysis of Adversary Campaigns and Intrusion Kill Chains, chapters Abstract, 3.2 Intrusion Kill Chain. Luettavissa: https://lockheedmartin.com/content/dam/lockheed-martin/rms/documents/cyber/LM-White-Paper-Intel-Driven-Defense.pdf

Santos et al: The Art of Hacking (Video Collection): 4.3 Surveying Essential Tools for Active Reconnaissance. https://learning.oreilly.com/videos/the-art-of/9780135767849/9780135767849-SPTT_04_00/

Korkeimman oikeuden päätös KKO:2003:36 https://finlex.fi/fi/oikeuskaytanto/korkein-oikeus/ennakkopaatokset/2003/36

Nmap Cheat Sheet 2025: All the Commands & Flags https://www.stationx.net/nmap-cheat-sheet/

Hacking into a Target Using Metasploit     https://tuomasvalkamo.com/PenTestCourse/week-2/





