# h4 Fuzzy

## Tiivistämistehtävät

### FFUF
-

## Harjoitustehtävät



### a) Fuzzzz. Ratkaise dirfuz-1 artikkelista Karvinen 2023: Find Hidden Web Directories - Fuzz URLs with ffuf.

Aloitin tehtävän lataamalla ```dirfuz-1``` tehtävän terokarvinen.com:ista, ja tämän jälkeen muokkaamalla sen oikeuksia niin, että sen voi suorittaa ja näin tehtävän avata.

<img width="675" height="159" alt="´fuzz1" src="https://github.com/user-attachments/assets/d8f423ad-360f-46ae-8bb4-08cbd5ae5fd5" />

Sitten Fuzzasin palvelua, ja syötteessä toistui usein ``` Size: 154``` joten lisäsin Fuzzaukseen filtterin ```-fs 154``` joka filteröi tiedoston koon mukaan.

<img width="769" height="505" alt="fuzz2" src="https://github.com/user-attachments/assets/e0048bf3-ee4d-4794-a8ed-b8eca41403e6" />

Sieltä löytyivätkin sitten ```wp-admin``` sekä ```.git```.

<img width="522" height="209" alt="wpadmin" src="https://github.com/user-attachments/assets/2c1e903c-049a-4ec1-baca-e2e781f4e2d7" /><img width="489" height="209" alt="git" src="https://github.com/user-attachments/assets/fde9ee80-40b4-4cbc-ad56-283f6e325a44" />



### b) Fuff me. Asenna FuffMe-harjoitusmaali. Karvinen 2023: Fuffme - Install Web Fuzzing Target on Debian

Asennetaan FuffMe Teron sivuilta löytyvien ohjeiden mukaan komennolla ```sudo apt-get install docker.io git ffuf```, ja luodaan harjoitusmaali  
>git clone https://github.com/adamtlangley/ffufme
>
>cd ffufme/
>
>sudo docker build -t ffufme .

Sitten käynnistetään maali komennolla `sudo docker run -d -p 80:80 ffufme`.

<img width="831" height="245" alt="ffufme" src="https://github.com/user-attachments/assets/ef13a20d-728e-405a-8974-6f749111c9fe" />

Ja lopuksi ladataan vielä sanalistat uuteen kansioon `wordlists`
> wget http://ffuf.me/wordlist/common.txt
> 
> wget http://ffuf.me/wordlist/parameters.txt
> 
> wget http://ffuf.me/wordlist/subdomains.txt

### c) Basic Content Discovery

Tehtävässä annetaan suoritettavaksi yksinkertainen Fuzzaus 
`ffuf -w ~/wordlists/common.txt -u http://localhost/cd/basic/FUZZ`
ja sitten curlilla katsottuna tulokset sanovat tiedoston olevan löydetty.

<img width="786" height="542" alt="fuzzC" src="https://github.com/user-attachments/assets/1a35ce78-92e8-45e9-9b18-769f13090833" />



### d) Content Discovery With Recursion

Tässä kohdassa komentoon lisätään `-recursion` kytkin, joka kertoo ffufille että kohdatessaan skannauksessaan uuden kansion aloitetaan siellä uusi skannaus. 
Annetulla komennolla löytyi kansio jonka sisältä löytyi vielä alikansioita.

<img width="837" height="641" alt="fuzzD" src="https://github.com/user-attachments/assets/1eef2500-0d50-46b9-ae39-69084dd365e2" />



### e) Content Discovery With File Extensions

Tässä kohdassa tutkittiin `-e` kytkin, jolle annetaan arvoksi `-log`, ja tulostaa fuzzaukseen tiedostot jotka päättyvät `-log`

<img width="859" height="502" alt="FuzzE" src="https://github.com/user-attachments/assets/277e9c37-4a9c-4b5b-aa5a-08eca6fb49e4" />


### f) No 404 Status

Tehtävässä fuzzataan tiedostoja, ja suodatetaan fuzzaus `-fs` switchillä, joka filtteröi pois kaikki valitun kokoiset tiedostot, ja näin jäljelle jää vain yksi oikea tiedosto, joka on secret.

<img width="815" height="416" alt="FuzzF" src="https://github.com/user-attachments/assets/df925d13-4d84-4c01-aa9e-74f9e2f40863" />




### g) Param Mining

Tehtävässä yritetään ensin yhtidstää tiedostopolkuun joka on vajaa, ja sen jälkeen komennolla `ffuf -w ~/wordlists/parameters.txt -u http://localhost/cd/param/data?FUZZ=1` haetaan puuttuva parametri joka on `debug`.

<img width="793" height="406" alt="fuzzG" src="https://github.com/user-attachments/assets/080e696d-7405-4523-9e6c-30c27eb1177f" />



### h) Rate Limited

Harjoituksessa fuzzataan hakemistoa joka hyväksyy vain 50 pyyntöä sekuntia kohti, ja koska pyyntöjä tulee nopeammin palauttaa se vain erroria.
Tämän jälkeen ajetaan uusi fuzzaus, jossa käytetään `-t` ja `-p` jotka rajoittavat hakujen määrän 50 hakuun per sekunti. `-p` parametrilla säädetään aikaa mikä käytetään yhteen hakuun, arvolla `0,1` jokaisen haun jälkeen pidetään 0,1 sekunnin tauko. `-t` parametrilla määritetään kuinka monta 
kertaa haluttu fuzzaus suoritetaan, arvolla `5` se suoritetaan viisi kertaa ja näin ollen siis hakuja suoritetaan viisi 0,1 sekunnin välein mikä tekee 50 hakua sekunnissa.

Ensimmäisellä kerralla suorittaessani toista fuzzausta en saanut mitään vastausta, mutta tämä johtui komennossa olleesta väärästä kohdeosoitteesta, jonka vaihdoin `ffuf.test`istä `localhost`iksi ja näin sain oikean tiedoston näkymään.

<img width="806" height="433" alt="FuzzH" src="https://github.com/user-attachments/assets/3fcbe61b-1ce8-4d0a-8394-d2f6d8c24335" />




### i) Subdomains - Virtual Host Enumeration

Tehtävässä etsitään subdomaineja. Ensimmäisellä fuzzauksella saadaan litanja tuloksia, joiden yhdistävä tekijä on koko 1495, ja suodattamalla `-fs 1495` ne pois tulokseksi jää pelkästään redhat.

<img width="873" height="448" alt="fuzzi" src="https://github.com/user-attachments/assets/873110bb-5faf-4299-a02e-ff568e3aba5a" />

Tästä viimeisestä kohdasta en kyllä mitään saanut irti, että mitä oikeasti tapahtuu.

## Lähteet

Kurssisivu https://terokarvinen.com/tunkeutumistestaus/

Tero Karvinen Find Hidden Web Directories https://terokarvinen.com/2023/fuzz-urls-find-hidden-directories/

Tero Karvinen Fuffme - Install Web Fuzzing Target on Debian https://terokarvinen.com/2023/fuffme-web-fuzzing-target-debian/

0x03 Still Fuzzing Faster (U Fool) - joohoi - HelSec Virtual meetup #1 https://www.youtube.com/watch?v=mbmsT3AhwWU

 
